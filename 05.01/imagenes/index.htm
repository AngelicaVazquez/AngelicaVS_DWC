<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>IMAGENES</title>

<script>

	function iniciar(){



		//for (var j=1;j<11;j++){
		//	getFaces(j);
		//}

		var cajas = 64;
		var aux=0;
		for(i = 1; i <= cajas; i++){
			
			var elemento = crearCaja('div',i);
		
			if(aux==8){
				aux=0;
				elemento.style.clear='left';
			}
			aux++;
		}
	}

	function getFaces(page){
		// [notas]
		// parsear el JSON
		// sincrono para encadenar las 10 peticiones, deberia ser asincrono
		// siempre retorna 10 id la APi? bueno

		var xhttp = new XMLHttpRequest(); //  [nota] para asincrono creamos un objeto para cada peticion
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				// todas las peticiones son atendidas por la misma callBack
				console.log(JSON.parse(this.responseText)); 
			}
		}
		var url='https://api.generated.photos/api/v1/faces?page='+page+'&api_key=8d-pvd7Jy9yx2zu0sVkAJQ';
		xhttp.open("GET",url,true); // [nota] true:asincrono , false:sincrono
		xhttp.send(); 
	}


		function crearCaja(tipo, num){
		var caja=document.createElement(tipo);
		caja.style.float = 'left';
		caja.id=num;
		caja.style.background="url('/gallery/face ('+i+').jpg')";
		caja.style.margin='4px';
		caja.style.border='1px solid #000';
		caja.style.height='50px';
		caja.style.width='50px';
		caja.addEventListener('click',clickCaja);
		document.body.appendChild(caja);
		return caja;
		}

		function clickCaja(){
		window.alert(this.id);
		}

window.onload=iniciar;
</script>

<style>
</style>

</head>
 
<body>
	<p><b>Instrucciones</b>: mover el cursor con teclas 4,8,6,2 del bloque numerico. ENTER y ESC para seleccionar. </p>
</body>
</html>
