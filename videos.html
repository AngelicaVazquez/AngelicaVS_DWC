<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" crossorigin="anonymous">
    <title>videos</title>
    <style>

        #principal {
            display: flex;
            width: 80%;
            flex-direction: column;
            position: absolute;
            left: 9%;
            top: 5%;
        }

        #ordenacion {
            display: flex;
            height: 40px;
            justify-content: space-around;
            margin-bottom: 20px;
            border: grey solid 3px;
        }

        #ordenacion .pure-button {
            width: 20%;
            margin: 1px;
        }
        #ordenacion .pure-button:first-child {
            background-color: rgb(73, 163, 73);
        }
        #ordenacion .pure-button:nth-child(2) {
            background-color: rgb(251, 253, 127);
        }

        #contenedor {
            display: flex;
            flex-wrap: nowrap;
            justify-content: space-between;
            overflow-x: scroll;
            overflow-y: hidden;
            border: grey solid 3px;
        }

        #contenedor > div {
            width: 300px;
            height: 250px;
            text-align: center;
            margin: 5px;
            margin-bottom: 50px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }

        #contenedor > div > img {
            height: 100px;
            width: 150px;
        }

    </style>

    <script>


        //div id="abrir" onclick="abrir()" -- abre() var ele.documentgetlemen(otro div para video); ele.style:display.inline; var ele:video;video src=
        //dv id "cerrar" onclick="cerrar()" -- cerrar()

        //Método closure. Tendrá una variable que queda guardada. 
        //En el constructor incluye this.vistas = (function(){var contador = 0; return function(){contador+=; return contador}})();

        class Video{
            constructor(vid,titulo,duracion,fechaSubida,imagen){
                this.vid = vid;
                this.titulo = titulo;
                this.duracion = duracion;
                this.fechaSubida = fechaSubida;
                this.imagen = imagen;
                this.visitas = (function(){var contador = 0; return function(){contador++; return contador}})();

            }
            html(){
                var img = "<img src=https://i.ytimg.com/vi/"+this.imagen+"/mqdefault.jpg></img>";
                var ele = document.createElement("div");
                var tit = this.titulo;
                var dur = this.duracion;
                var sub = this.fechaSubida;
                ele.innerHTML=img+"<H5>"+tit+"</H5><br>"+sub+"<br>"+dur+"<br>"+this.visitas();
                document.getElementById("contenedor").append(ele);
                //propiedad display none?
            }
        }

        function cargar(){

            //Creando los contenedores
            var principal = document.createElement("div");
            principal.id="principal";
            var ordenacion = document.createElement("div");
            ordenacion.id="ordenacion";
            var contenedor = document.createElement("div");
            contenedor.id="contenedor";
            document.body.appendChild(principal);
            document.getElementById("principal").appendChild(ordenacion);
            document.getElementById("principal").appendChild(contenedor);

            //Creando los videos e introduciéndolos en un array
            var arrayVideos = [];

            var video1 = new Video(9,"Arrival",9,9,"uWs5lsWXLbo");
            arrayVideos.push(video1);
            var video2 = new Video(9,"Gravity",9,9,"VptHhljW3Ls");
            arrayVideos.push(video2);
            var video3 = new Video(9,"Interestellar",9,9,"qPBRz8LcWn0");
            arrayVideos.push(video3);
            var video4 = new Video(9,"First Man",9,9,"N1YVcih9dHA");
            arrayVideos.push(video4);
            var video5 = new Video(9,"Moon",9,9,"OAnTQMP6BUU");
            arrayVideos.push(video5);
            var video6 = new Video(9,"The Martian",9,9,"OS23SmNlE3Y");
            arrayVideos.push(video6);
            var video7 = new Video(9,"Jurassic World",9,9,"YGUHJvo9Qd0");
            arrayVideos.push(video7);
            var video8 = new Video(9,"Godzilla",9,9,"yPTgUSeE8Tc");
            arrayVideos.push(video8);
            var video9 = new Video(9,"Transformers",9,9,"aKo6V_HAG9Q");
            arrayVideos.push(video9);
            var video10 = new Video(9,"Pacific Rim",9,9,"qLg524GEzGY");
            arrayVideos.push(video10);
            var video11 = new Video(9,"Dragon ball Super Broly",9,9,"6ndGdHTNa_U");
            arrayVideos.push(video11);
            var video12 = new Video(9,"Coco",9,9,"DZgQofCkTbA");
            arrayVideos.push(video12);
            var video13 = new Video(9,"Frankenweenie",9,9,"_5VIfqittbo");
            arrayVideos.push(video13);
            var video14 = new Video(9,"Monster House",9,9,"SSpy-4CBvjA");
            arrayVideos.push(video14);
            var video15 = new Video(9,"Up",9,9,"JttMI7BevNk");
            arrayVideos.push(video15);
            var video16 = new Video(9,"The Maze Runner",9,9,"MHnF0yAlHoQ");
            arrayVideos.push(video16);
            var video17 = new Video(9,"The Host",9,9,"QVjihByxxUI");
            arrayVideos.push(video17);
            var video18 = new Video(9,"X-Men",9,9,"T5vs1Bwkhrw");
            arrayVideos.push(video18);
            var video19 = new Video(9,"Fantastic Four",9,9,"aif0T0yk9gk");
            arrayVideos.push(video19);
            var video20 = new Video(9,"Green Lantern",9,9,"qA6zwUUj7QE");
            arrayVideos.push(video20);

            //Duración aleatoria
            arrayVideos.forEach(video => {
                var rndmDuracion = Math.floor(1000 + Math.random() * 9000);
                video.duracion=rndmDuracion;
            });


            //Fecha de subida aleatoria
            arrayVideos.forEach(video => {
                function randomDate(start, end) {
                return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
                }
                rndmSubida=randomDate(new Date(2012, 0, 1), new Date()).toLocaleDateString();
                video.fechaSubida=rndmSubida;
            });

            //Creando los botones
            var todos = document.createElement("button");
            document.getElementById("ordenacion").append(todos);
            todos.addEventListener("click", funcTodos);
            todos.className="pure-button";
            todos.innerHTML="TODOS (20)";
            var filtro = document.createElement("button");
            document.getElementById("ordenacion").append(filtro);
            filtro.addEventListener("click", funcFiltro);
            filtro.className="pure-button";
            filtro.innerHTML="FILTRO: 1-5"
            var fTitulo = document.createElement("button");
            document.getElementById("ordenacion").append(fTitulo);
            fTitulo.addEventListener("click", funcTitulo);
            fTitulo.className="pure-button";
            fTitulo.innerHTML="OX TITULO";
            var fSubida = document.createElement("button");
            document.getElementById("ordenacion").append(fSubida);
            fSubida.addEventListener("click", funcSubida);
            fSubida.className="pure-button";
            fSubida.innerHTML="OX SUBIDA";
            var fVisitas = document.createElement("button");
            document.getElementById("ordenacion").append(fVisitas);
            fVisitas.className="pure-button";
            fVisitas.innerHTML="OX VISITAS";
            var fDuracion = document.createElement("button");
            document.getElementById("ordenacion").append(fDuracion);
            fDuracion.className="pure-button";
            fDuracion.innerHTML="OX DURACION";

            //Funcionalidad botón TODOS
            function funcTodos(){
                contenedor.innerHTML = '';
                arrayVideos.forEach(video => {
                    video.html();
                    //console.log(arrayVideos.length);
                    console.log(video);
                });
            }

            //Funcionalidad botón FILTRO
            function funcFiltro(){
                contenedor.innerHTML = '';
                for (i = 0; i < 5; i++) {
                    arrayVideos[i].html();
                }
            } 

            //Funcionalidad botón OX TITULO
            function funcTitulo(){
                contenedor.innerHTML = '';
                function ordenTitulo( a, b ) {
                    if ( a.titulo < b.titulo ){
                        return -1;
                    }
                    if ( a.titulo > b.titulo ){
                        return 1;
                    }
                    return 0;
                    }
                arrayVideos.sort(ordenTitulo);
                arrayVideos.forEach(video => {
                    video.html();
                });
            }

            //Funcionalidad botón OX SUBIDA
            function funcSubida(){
                contenedor.innerHTML = '';

            }

        }

        window.onload = cargar;
    </script>
</head>
<body>
</body>
</html>